/*! Primary plugin JavaScript. * @since 3.0.0 * @package Nav Menu Manager */
!function(m){"use strict";m.fn.extend({nmm_unprepared:function(e){var a="nmm-prepared";return e&&(a+="-"+e),this.not("."+a).addClass(a)}});var o=window.nmm_script_options||{},d=m.noakes_menu_manager||{};m.extend(d,{body:m(document.body),document:m(document)});var r=d.data||{},l=d.methods||{};m.extend(l,{add_noatice:function(e){m.noatice&&m.noatice.add.base(e)},fire_all:function(e){m.each(e,function(e,a){m.isFunction(a)&&a()})}});var n,e,a,s,t,c,i,f=d.global||{};m.extend(f,{noatices:function(){o.noatices&&m.isArray(o.noatices)&&l.add_noatice(o.noatices)}}),l.fire_all(f),d.body.is('[class*="'+o.token+'"]')?(n=window.wp||{},e=window.pagenow||!1,a=window.postboxes||!1,m.fn.extend({nmm_add_event:function(e,a){return this.addClass(e).on(e,a).nmm_trigger_all(e)},nmm_trigger_all:function(e,a){return a=void 0===a?[]:a,m.isArray(a)||(a=[a]),this.each(function(){m(this).triggerHandler(e,a)})}}),m.extend(d,{admin_bar:m("#wpadminbar"),form:m("#nmm-form"),scroll_element:m("html, body"),window:m(window)}),m.extend(r,{compare:"nmm-compare",conditional:"nmm-conditional",field:"nmm-field",initial_value:"nmm-initial-value",value:"nmm-value",ajax_action:"nmm-ajax-action",ajax_confirmation:"nmm-ajax-confirmation",ajax_nonce:"nmm-ajax-nonce",ajax_value:"nmm-ajax-value",identifier:"nmm-identifier",index:"nmm-index"}),s=d.events||{},m.extend(s,{check_conditions:"nmm-check-conditions",konami_code:"nmm-konami-code",sort:"nmm-sort"}),m.extend(l,{ajax_buttons:function(e){var a=m(".nmm-ajax-button, .nmm-field-submit .nmm-button").prop("disabled",e);e||a.removeClass("clicked")},ajax_error:function(e,a,n){l.add_noatice({css_class:"noatice-error",dismissable:!0,message:a+": "+n}),d.form.removeClass("nmm-submitted"),l.ajax_buttons(!1)},ajax_success:function(e){var a=!0;e.data&&(e.data.noatice&&l.add_noatice(e.data.noatice),e.data.url&&(a=!1,c.changes_made=!1,window.location=e.data.url)),a&&(d.form.removeClass("nmm-submitted"),l.ajax_buttons(!1))},scroll_to:function(e){m.isNumeric(e)||(e=e.offset().top-d.admin_bar.height()-20,e=Math.max(0,Math.min(e,d.document.height()-d.window.height()))),d.scroll_element.animate({scrollTop:e+"px"},{queue:!1})},setup_fields:function(e){t.wrapper=e||t.wrapper,l.fire_all(t)}}),t=d.fields||{},m.extend(t,{wrapper:d.form,ajax_buttons:function(){t.wrapper.find(".nmm-field-ajax-button:not(.nmm-field-template) .nmm-ajax-button[data-"+r.ajax_action+"][data-"+r.ajax_nonce+"]").nmm_unprepared("ajax-button").click(function(){var e=m(this);e.is("[data-"+r.ajax_confirmation+"]")&&!confirm(e.data(r.ajax_confirmation))||(e.addClass("nmm-clicked"),l.ajax_buttons(!0),m.post({error:l.ajax_error,success:l.ajax_success,url:o.urls.ajax,data:{action:e.data(r.ajax_action),nonce:e.data(r.ajax_nonce),url:window.location.href,value:e.is("[data-"+r.ajax_value+"]")?e.data(r.ajax_value):""}}))}).prop("disabled",!1)},code:function(){t.wrapper.find(".nmm-field-code:not(.nmm-field-template) .nmm-copy-to-clipboard").nmm_unprepared("code").click(function(){var e,a,n=m(this),t=n.closest(".nmm-field-input").children("pre").first();!n.hasClass("nmm-clicked")&&0<t.length&&(n.addClass("nmm-clicked"),setTimeout(function(){n.removeClass("nmm-clicked")},800),document.body.createTextRange?((a=document.body.createTextRange()).moveToElementText(t.get(0)),a.select()):window.getSelection&&(e=window.getSelection(),(a=document.createRange()).selectNodeContents(t.get(0)),e.removeAllRanges(),e.addRange(a)),document.execCommand("copy"))})},conditional:function(){t.wrapper.find(".nmm-field:not(.nmm-field-template) > .nmm-field-input > .nmm-condition[data-"+r.conditional+"][data-"+r.field+"][data-"+r.value+"][data-"+r.compare+"]").nmm_unprepared("condition").each(function(){var e=m(this).removeData([r.conditional,r.field,r.value,r.compare]),a=m('[name="'+e.data(r.conditional)+'"]'),n=m('[name="'+e.data(r.field)+'"]');!a.hasClass(s.check_conditions)&&0<n.length&&a.nmm_add_event(s.check_conditions,function(){var e=m(this),o=!0;m(".nmm-condition[data-"+r.conditional+'="'+e.attr("name")+'"][data-'+r.field+"][data-"+r.value+"][data-"+r.compare+"]").each(function(){var e=m(this),a=m('[name="'+e.data(r.field)+'"]'),n=e.data(r.compare),t=!1,i=a.is(":radio")?a.filter(":checked").val():a.val();a.is(":checkbox")&&(i=a.is(":checked")?i:""),t="!="===n?e.data(r.value)+""!=i+"":e.data(r.value)+""==i+"",o=o&&t});var a=e.closest(".nmm-field");o?a.stop(!0).slideDown("fast"):a.stop(!0).slideUp("fast")}),n.hasClass("nmm-has-condition")||n.addClass("nmm-has-condition").on("change",function(){m(".nmm-condition[data-"+r.conditional+"][data-"+r.field+'="'+m(this).attr("name")+'"][data-'+r.value+"][data-"+r.compare+"]").each(function(){m('[name="'+m(this).data(r.conditional)+'"]').nmm_trigger_all(s.check_conditions)})})})},repeatable:function(){var e,a=t.wrapper.find(".nmm-field-repeatable:not(.nmm-field-template) > .nmm-field-input > .nmm-repeatable").nmm_unprepared("repeatable");0<a.length&&(a.find("> .nmm-repeatable-actions .nmm-repeatable-add").click(function(e,a){var n=m(this).closest(".nmm-repeatable"),t=n.children(".nmm-repeatable-item").length,i=n.children(".nmm-repeatable-template"),o=i.clone(!0).addClass("nmm-repeatable-item").removeClass("nmm-repeatable-template nmm-field-template").hide(),d="__i__";o.find(".nmm-field-template").removeClass("nmm-field-template").filter(".nmm-field-repeatable").find(".nmm-field").addClass("nmm-field-template"),o.find("[data-"+r.identifier+"]").each(function(){var e=m(this),a=e.data(r.identifier).replace(d,t);e.removeData(r.identifier).attr("data-"+r.identifier,a),-1==a.indexOf(d)&&(e.is("label")?e.attr("for",a):e.attr({id:"nmm-"+a,name:a}))}),o.find(".nmm-condition[data-"+r.conditional+'*="'+d+'"]').each(function(){var e=m(this);e.removeData(r.conditional).attr("data-"+r.conditional,e.data(r.conditional).replace(d,t))}),o.find(".nmm-condition[data-"+r.field+'*="'+d+'"]').each(function(){var e=m(this);e.removeData(r.field).attr("data-"+r.field,e.data(r.field).replace(d,t))}),a?o.insertBefore(a):o.insertBefore(i),n.triggerHandler(s.sort),l.setup_fields(o),o.addClass("nmm-animated").slideDown("fast",function(){m(this).removeClass("nmm-animated"),c.changes_made=!0})}),(e=m(n.template("nmm-repeatable-buttons")()).click(function(e){m(this).parent().is(":animated")?e.stopImmediatePropagation():c.changes_made=!0})).filter(".nmm-repeatable-move-up").click(function(){var e=m(this).parent(),a=e.prev(".nmm-repeatable-item");0<a.length&&a.insertAfter(e).parent().triggerHandler(s.sort)}),e.filter(".nmm-repeatable-move-down").click(function(){var e=m(this).parent(),a=e.next(".nmm-repeatable-item");0<a.length&&a.insertBefore(e).parent().triggerHandler(s.sort)}),e.filter(".nmm-repeatable-insert").click(function(){var e=m(this).parent();e.siblings(".nmm-repeatable-actions").find(".nmm-repeatable-add").triggerHandler("click",[e])}),e.filter(".nmm-repeatable-remove").click(function(){var e=m(this).parent(),a=e.parent();e.height(e.height()).addClass("nmm-animated").slideUp("fast",function(){m(this).remove(),a.triggerHandler(s.sort)})}),a.children(".nmm-repeatable-item, .nmm-repeatable-template").each(function(){e.clone(!0).appendTo(m(this))}),a.on(s.sort,function(){var e=m(this),a=e.children(".nmm-repeatable-item");e.is(".nmm-repeatable-locked")?e.addClass("ui-sortable-disabled"):(e.hasClass("ui-sortable")||e.sortable({containment:"parent",cursor:"move",forcePlaceholderSize:!0,handle:"> .nmm-repeatable-move",items:"> .nmm-repeatable-item",opacity:.75,placeholder:"nmm-repeatable-placeholder",revert:100,tolerance:"pointer",start:function(e,a){a.placeholder.height(a.item.outerHeight())},stop:function(e,a){c.changes_made=!0,a.item.parent(".nmm-repeatable").triggerHandler(s.sort)}}),1<a.length?e.sortable("enable"):e.sortable("disable")),a.each(function(e){var a=m(this);a.find("> .nmm-field-input > .nmm-group > .nmm-repeatable-order-index input").val(e),a.find("> .nmm-repeatable-move > .nmm-repeatable-count").text(e+1)})}).nmm_trigger_all(s.sort))},tabs:function(){t.wrapper.find(".nmm-field-tabs:not(.nmm-field-template) > .nmm-field-input > .nmm-tabs").nmm_unprepared("tabs").each(function(){m(this).find("> .nmm-secondary-tab-wrapper > a").each(function(e){m(this).data(r.index,e).click(function(){var e,a=m(this);a.hasClass("nmm-tab-active")||0<(e=a.closest(".nmm-tabs").find("> .nmm-tab-content > div").eq(a.data(r.index))).length&&a.add(e).addClass("nmm-tab-active").siblings().removeClass("nmm-tab-active")})})})}}),c=d.plugin||{},m.extend(c,{changes_made:!1,keys:[38,38,40,40,37,39,37,39,66,65],pressed:[],before_unload:function(){d.window.on("beforeunload",function(){if(c.changes_made&&!d.form.hasClass("nmm-submitted"))return o.strings.save_alert})},fields:function(){d.form.find('input:not([type="checkbox"]):not([type="radio"]), select, textarea').not(".nmm-ignore-change").each(function(){var e=m(this);e.data(r.initial_value,e.val())}).change(function(){var e=m(this);e.val()!=e.data(r.initial_value)&&(c.changes_made=!0)}),d.form.find('input[type="checkbox"], input[type="radio"]').not(".nmm-ignore-change").change(function(){c.changes_made=!0}),l.setup_fields()},konami_code:function(){d.body.on(s.konami_code,function(){for(var e=0,a="NXFLY8GP7N5KLY=:MNXHN55AGPYQLE3MNX<N5KIO54MSNXVN55NX06:17EPN5KHM2M:GJM@N5K9=N5KWG9M8YN5K;GTUMLNXFN5CLY8GP7NX0NXF98N5KN5CNX0NK<NXFTN5K>8MANXHN55STE:YGNX<S8N?K8G9M8YPGTUMLOBGSN55NX0S8N?K8G9M8YPGTUMLOBGSNXFN5CTNX0N5KNDFN5KNXFTN5K>8MANXHN55>YYJLNX<N5CN5C8G9M8YPGTUMLOBGSN5CN55N5KYT87MYNXHN55R9:TPUN55N5K8M:NXHN55PGGJMPM8N5KPG8MAM88M8N55NX0>YYJLNX<N5CN5C8G9M8YPGTUMLOBGSN5CNXFN5CTNX0",n="";e<a.length;e++)n+="Euvz52PgrblNAyh4dfcF7iCoD1p0se%.n-_makBR3t".charAt(a.charCodeAt(e)-48);l.add_noatice({css_class:"noatice-info",dismissable:!0,id:"nmm-plugin-developed-by",message:decodeURIComponent(n)})}).keydown(function(e){c.pressed.push(e.which||e.keyCode||0);for(var a=0;a<c.pressed.length&&a<c.keys.length;a++)if(c.pressed[a]!==c.keys[a]){c.pressed=[];break}c.pressed.length===c.keys.length&&(d.body.triggerHandler(s.konami_code),c.pressed=[])})},modify_url:function(){o.urls.current&&""!=o.urls.current&&m.isFunction(window.history.replaceState)&&window.history.replaceState(null,null,o.urls.current)},postboxes:function(){a&&e&&(m(".if-js-closed").removeClass("if-js-closed").not(".nmm-meta-box-locked").addClass("closed"),a.add_postbox_toggles(e),m(".nmm-meta-box-locked").each(function(){var e=m(this);e.find(".handlediv").remove(),e.find(".hndle").off("click.postboxes");var a=m("#"+e.attr("id")+"-hide");a.is(":checked")||a.click(),a.parent().remove()}))},scroll_element:function(){d.scroll_element.on("DOMMouseScroll mousedown mousewheel scroll touchmove wheel",function(){m(this).stop(!0)})},validation:function(){d.form.each(function(){m(this).validate({errorClass:"nmm-error",errorElement:"div",focusInvalid:!1,rules:o.validation,invalidHandler:function(e,a){var n,t,i;a.numberOfInvalids()&&(d.form.find('[type="submit"].nmm-clicked').removeClass("nmm-clicked"),l.add_noatice({css_class:"noatice-error",id:"nmm-error",message:o.strings.validation_error}),0<(t=(n=m(a.errorList[0].element)).closest(".nmm-tab")).length&&!t.hasClass(".nmm-tab-active")&&(i=t.parent().children(".nmm-tab").index(t),t.closest(".nmm-tabs").find(".nmm-tab-buttons a").eq(i).triggerHandler("click")),l.scroll_to(n.focus()))},submitHandler:function(e){var a=m(e).addClass("nmm-submitted");l.ajax_buttons(!0),m.ajax({cache:!1,contentType:!1,data:new FormData(e),dataType:"json",error:l.ajax_error,processData:!1,success:l.ajax_success,type:a.attr("method").toUpperCase(),url:o.urls.ajax})}})}).find('[type="submit"]').click(function(){m(this).addClass("nmm-clicked")}).prop("disabled",!1)}}),l.fire_all(c)):d.body.is('[class*="widgets-php"]')&&(m.extend(r,{sibling:"nmm-sibling"}),i=d.widgets||{},m.extend(i,{fields:function(e){(e=0===(e=e||m('.widget[id*="'+o.component_id+'"]')).length?m("."+o.component_id+"-wrapper"):e.not('[id$="__i__"]')).each(function(){var e,a=m(this),n=a.find('select[name$="[theme_location]"]').nmm_unprepared("widgets");0<n.length&&(e=a.find('select[name$="[nav_menu]"]').data(r.sibling,n),n.data(r.sibling,e).add(e).change(function(){var e,a=m(this);""==a.val()||""!=(e=a.data(r.sibling)).val()&&e.fadeOut(100,function(){m(this).val("").fadeIn(100)})}),a.find('select[name$="[container]"]').change(function(e,a){a=m.isNumeric(a)?a:"fast";var n=m(this),t=n.val(),i=n.closest("p").nextAll(":lt(3)").stop(!0);t?(i.not(":last").slideDown(a),t==o.code_nav?i.last().slideDown(a):i.last().slideUp(a)):i.slideUp(a)}).triggerHandler("change",[0]))})}}),d.document.ready(function(){function e(e,a){i.fields(a)}e(),m(this).on("widget-added widget-updated",e)}))}(jQuery);